{"version":3,"sources":["webpack://mesto/./src/components/Card.js","webpack://mesto/./src/components/FormValidator.js","webpack://mesto/./src/components/Api.js","webpack://mesto/./src/components/Section.js","webpack://mesto/./src/components/UserInfo.js","webpack://mesto/./src/components/Popup.js","webpack://mesto/./src/components/PopupWithImage.js","webpack://mesto/./src/components/PopupWithForm.js","webpack://mesto/./src/components/PopupWithConfirm.js","webpack://mesto/./src/utils/constants.js","webpack://mesto/./src/pages/index.js"],"names":["Card","cardSelector","userId","data","handleCardClick","handleDeleteClick","handleLikeClick","this","_name","name","_link","link","_id","_likes","likes","_ownerId","owner","_handleCardClick","_handleDeleteClick","_handleLikeClick","_isLiked","_cardSelector","_userId","_element","_getTemplate","_deleteButton","querySelector","_likeHearth","_likesNumber","cloneNode","arr","some","item","answer","classList","add","remove","newDataCard","textContent","length","_renderUserLike","_seekUserLike","addEventListener","_deleteCard","_setCurrentLikeStatus","_setEventListeners","placeElementImage","src","alt","FormValidator","validationPopupsConfig","validatingForm","_formSelector","formSelector","_inputSelector","inputSelector","_fieldsetSelector","fieldsetSelector","_submitButtonSelector","submitButtonSelector","_inactiveButtonClass","inactiveButtonClass","_inputErrorClass","inputErrorClass","_errorClass","errorClass","_validatingForm","_inputList","Array","from","querySelectorAll","inputElement","errorMessage","errorElement","id","validity","valid","_hideInputError","_showInputError","validationMessage","_hasInvalidInput","_buttonElement","disabled","_toggleButtonState","forEach","_checkInputValidity","contains","input","setDefaultInputs","setDefaultButton","evt","preventDefault","Api","config","_url","baseUrl","_headers","headers","res","ok","json","Promise","reject","status","fetch","then","_getResponse","place","method","body","JSON","stringify","cardId","title","subtitle","about","newAvatar","avatar","Section","containerSelector","renderer","_renderer","_container","renderedItems","insert","isArray","element","isAppend","append","prepend","UserInfo","job","_job","_avatar","_userInfo","avatarLink","Popup","popupSelector","_popup","_closeButton","_handleEscClose","_popupEscClose","bind","_handleClickClose","_popupClickClose","_handleclosePopup","closePopup","event","target","key","document","removeEventListener","_addHandleEscClose","_removeHandleEscClose","PopupWithImage","_image","_imageCaption","PopupWithForm","submitForm","opener","_submitForm","_opener","_popupForm","_inputsValues","value","_getInputValues","reset","PopupWithConfirm","deleteCard","_funcToDeleteCard","_formSubmit","elementsContainer","popupEdit","popupAdd","popupAvatar","popupImage","popupConfirm","avatarImage","nameInput","jobInput","placeInput","linkInput","avatarLinkInput","editButton","addButton","standartCard","content","formEditValidator","formAddValidator","formAvatarValidator","api","authorization","user","all","getUser","getInitialCards","results","setUserInfo","cardList","renderItems","catch","err","console","error","card","imagePopup","openPopup","confirmPopup","isLiked","setNewLikeStatus","setLikeCard","deleteLikeCard","getUserInfo","addItem","generateCard","inLoading","isLoading","addPopup","inputsValues","setNewCard","response","finally","resetAll","editPopup","setUser","renderError","avatarPopup","setUserAvatar","setEventListeners","enableValidation"],"mappings":"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","file":"main.js","sourcesContent":["export class Card {\r\n  constructor({ data, handleCardClick, handleDeleteClick, handleLikeClick }, cardSelector, userId) {\r\n    this._name = data.name;\r\n    this._link = data.link;\r\n    this._id = data._id;\r\n    this._likes = data.likes;\r\n    this._ownerId = data.owner._id;\r\n\r\n    this._handleCardClick = handleCardClick;\r\n    this._handleDeleteClick = handleDeleteClick;\r\n    this._handleLikeClick = handleLikeClick;\r\n\r\n    this._isLiked = false;\r\n\r\n    this._cardSelector = cardSelector;\r\n    this._userId = userId;\r\n    this._element = this._getTemplate();\r\n    this._deleteButton = this._element.querySelector('.elements__delete-button');\r\n    this._likeHearth = this._element.querySelector('.elements__caption-like');\r\n    this._likesNumber = this._element.querySelector('.elements__likes-number');\r\n  }\r\n\r\n  _getTemplate() {\r\n    const elementTemplate = this._cardSelector.cloneNode(true);\r\n    return elementTemplate;\r\n  }\r\n\r\n\r\n\r\n  _seekUserLike(arr) {\r\n    return arr.some(item => item._id === this._userId);\r\n\r\n    /* \r\n      запасной вариант, работает везде\r\n          for (var i = 0; i < arr.length; i++) {\r\n            if (arr[i]._id === this._userId) {\r\n              return true;\r\n            }\r\n          }\r\n          return false;\r\n     */\r\n  }\r\n\r\n  _renderUserLike(answer) {\r\n    if (answer === true) {\r\n      this._likeHearth.classList.add('elements__caption-like_color_black');\r\n      this._isLiked = true;\r\n    } else {\r\n      this._likeHearth.classList.remove('elements__caption-like_color_black');\r\n      this._isLiked = false;\r\n    }\r\n  }\r\n\r\n\r\n  _setCurrentLikeStatus(newDataCard) {\r\n    this._likesNumber.textContent = newDataCard.likes.length;\r\n    this._renderUserLike(this._seekUserLike(newDataCard.likes));\r\n\r\n  }\r\n\r\n\r\n\r\n  _setEventListeners() {\r\n    if (this._deleteButton) {\r\n      this._deleteButton.addEventListener('click', () => {\r\n        this._handleDeleteClick(this._id, () => { this._deleteCard() });\r\n      });\r\n    }\r\n\r\n    this._element.querySelector('.elements__caption-like').addEventListener('click', () => {\r\n      this._handleLikeClick(this._id, this._isLiked, (newDataCard) => { this._setCurrentLikeStatus(newDataCard) });\r\n    });\r\n\r\n    this._element.querySelector('.elements__image').addEventListener('click', () => {\r\n      this._handleCardClick(this._name, this._link);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  _deleteCard() {\r\n    this._element.remove();\r\n    this._element = null\r\n  }\r\n\r\n\r\n\r\n  generateCard() {\r\n    if (this._ownerId !== this._userId) {\r\n      this._deleteButton.remove();\r\n    }\r\n\r\n    this._setEventListeners();\r\n\r\n    const placeElementImage = this._element.querySelector('.elements__image');\r\n\r\n    placeElementImage.src = this._link;\r\n    placeElementImage.alt = this._name;\r\n    this._element.querySelector('.elements__caption').textContent = this._name;\r\n\r\n    this._likesNumber.textContent = this._likes.length;\r\n    this._renderUserLike(this._seekUserLike(this._likes));\r\n\r\n    return this._element;\r\n  }\r\n}","export class FormValidator {\r\n  constructor(validationPopupsConfig, validatingForm) {\r\n    this._formSelector = validationPopupsConfig.formSelector;\r\n    this._inputSelector = validationPopupsConfig.inputSelector;\r\n    this._fieldsetSelector = validationPopupsConfig.fieldsetSelector;\r\n    this._submitButtonSelector = validationPopupsConfig.submitButtonSelector;\r\n    this._inactiveButtonClass = validationPopupsConfig.inactiveButtonClass;\r\n    this._inputErrorClass = validationPopupsConfig.inputErrorClass;\r\n    this._errorClass = validationPopupsConfig.errorClass;\r\n    this._validatingForm = validatingForm;\r\n    this._inputList = Array.from(this._validatingForm.querySelectorAll(this._inputSelector));\r\n\r\n\r\n  }\r\n\r\n  //ПОКАЗАТЬ ИЛИ СКРЫТЬ ОШИБКИ В ЗАВИСИМОСТИ ОТ ВАЛИДНОСТИ ФОРМЫ: -----------------------------------------------------------\r\n\r\n  _showInputError(inputElement, errorMessage) {\r\n    const errorElement = this._validatingForm.querySelector(`#${inputElement.id}-error`);\r\n    inputElement.classList.add(this._inputErrorClass);\r\n    errorElement.textContent = errorMessage;\r\n    errorElement.classList.add(this._errorClass);\r\n  };\r\n\r\n  _hideInputError(inputElement) {\r\n    const errorElement = this._validatingForm.querySelector(`#${inputElement.id}-error`);\r\n    inputElement.classList.remove(this._inputErrorClass);\r\n    errorElement.classList.remove(this._errorClass);\r\n    errorElement.textContent = '';\r\n  };\r\n\r\n\r\n  _checkInputValidity(inputElement) {\r\n    if (inputElement.validity.valid) {\r\n      this._hideInputError(inputElement);\r\n    } else {\r\n      this._showInputError(inputElement, inputElement.validationMessage);\r\n    }\r\n  };\r\n\r\n  // -----------------------------------------------\r\n\r\n\r\n  //ПЕРЕКЛЮЧАТЕЛЬ АКТИВНОСТИ КНОПКИ САБМИТА В ЗАВИСИМОСТИ НАЛИЧИЯ ХЯТЯБЫ ОДНОГО НЕВАЛИДНОГО ИНПУТА: -------------\r\n\r\n  _hasInvalidInput() {\r\n    return this._inputList.some((inputElement) => {\r\n      return !inputElement.validity.valid;\r\n    });\r\n  };\r\n\r\n  _toggleButtonState() {\r\n    if (this._hasInvalidInput()) {\r\n      this._buttonElement.classList.add(this._inactiveButtonClass);\r\n      this._buttonElement.disabled = true;\r\n    } else {\r\n      this._buttonElement.classList.remove(this._inactiveButtonClass);\r\n      this._buttonElement.disabled = false;\r\n    }\r\n  };\r\n\r\n  //-----------------------------------------------------------\r\n\r\n\r\n  //ФУНКЦИИ УСТАНОВКИ СЛУШАТЕЛЕЙ НА ДОКУМЕНТ ЗАТЕМ И НА ФОРМЫ: -----------------------------\r\n\r\n  _setEventListeners() {\r\n    this._buttonElement = this._validatingForm.querySelector(this._submitButtonSelector);\r\n    this._toggleButtonState();\r\n\r\n    this._inputList.forEach((inputElement) => {\r\n      inputElement.addEventListener('input', () => {\r\n        this._checkInputValidity(inputElement);\r\n        this._toggleButtonState();\r\n      });\r\n    });\r\n  };\r\n\r\n  //СБРОС ОШИБОК:--------------------------------------------------------------------\r\n\r\n  setDefaultButton() {\r\n    if (!this._buttonElement.classList.contains(this._inactiveButtonClass)) {\r\n      this._buttonElement.classList.add(this._inactiveButtonClass);\r\n      this._buttonElement.disabled = true;\r\n    }\r\n  };\r\n\r\n  setDefaultInputs() {\r\n    this._inputList.forEach(input => this._hideInputError(input));\r\n  };\r\n\r\n  resetAll() {\r\n      this.setDefaultInputs();\r\n      this.setDefaultButton();\r\n    }\r\n    //-----------------------------------\r\n\r\n\r\n  enableValidation() {\r\n    this._validatingForm.addEventListener('submit', (evt) => {\r\n      evt.preventDefault();\r\n    });\r\n\r\n    this._setEventListeners();\r\n  };\r\n}","export default class Api {\r\n  constructor(config) {\r\n    this._url = config.baseUrl;\r\n    this._headers = config.headers;\r\n  }\r\n\r\n  _getResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n        headers: this._headers,\r\n      })\r\n      .then(this._getResponse);\r\n  }\r\n\r\n  setNewCard({ place, link }) {\r\n    return fetch(`${this._url}/cards`, {\r\n        method: 'POST',\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          name: place,\r\n          link: link\r\n        })\r\n      })\r\n      .then(this._getResponse);\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._url}/cards/${cardId}`, {\r\n        method: 'DELETE',\r\n        headers: this._headers,\r\n      })\r\n      .then(this._getResponse);\r\n  }\r\n\r\n\r\n\r\n\r\n  setLikeCard(cardId) {\r\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\r\n        method: 'PUT',\r\n        headers: this._headers,\r\n      })\r\n      .then(this._getResponse);\r\n  }\r\n\r\n  deleteLikeCard(cardId) {\r\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\r\n        method: 'DELETE',\r\n        headers: this._headers,\r\n      })\r\n      .then(this._getResponse);\r\n  }\r\n\r\n\r\n\r\n\r\n  getUser() {\r\n    return fetch(`${this._url}/users/me`, {\r\n        headers: this._headers,\r\n      })\r\n      .then(this._getResponse);\r\n  }\r\n\r\n  setUser({ title, subtitle }) {\r\n    return fetch(`${this._url}/users/me`, {\r\n        method: 'PATCH',\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          name: title,\r\n          about: subtitle\r\n        })\r\n      })\r\n      .then(this._getResponse);\r\n  }\r\n\r\n  setUserAvatar(newAvatar) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n        method: 'PATCH',\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          avatar: newAvatar\r\n        })\r\n      })\r\n      .then(this._getResponse);\r\n  }\r\n\r\n\r\n\r\n}","export default class Section {\r\n  constructor({ renderer }, containerSelector) {\r\n\r\n    this._renderer = renderer;\r\n\r\n    this._container = containerSelector;\r\n  }\r\n\r\n\r\n\r\n  renderItems(renderedItems, insert) {\r\n    if (Array.isArray(renderedItems) === true) {\r\n      renderedItems.forEach(item => this._renderer(item, insert))\r\n    } else {\r\n      this._renderer(renderedItems, insert);\r\n    }\r\n  }\r\n\r\n\r\n  addItem(element, isAppend) {\r\n    if (isAppend === true) {\r\n      this._container.append(element);\r\n    } else {\r\n      this._container.prepend(element);\r\n    }\r\n  }\r\n}","export default class UserInfo {\r\n  constructor(name, job, avatar) {\r\n    this._name = name;\r\n    this._job = job;\r\n    this._avatar = avatar;\r\n    this._userId;\r\n  }\r\n\r\n  getUserInfo() {\r\n    this._userInfo = {\r\n      name: this._name.textContent,\r\n      job: this._job.textContent,\r\n      avatar: this._avatar.src,\r\n      id: this._userId\r\n    }\r\n    return this._userInfo;\r\n  }\r\n\r\n\r\n  setUserInfo({ name, about, avatar, _id }) {\r\n    this._name.textContent = name;\r\n    this._job.textContent = about;\r\n    this._avatar.src = avatar;\r\n    this._avatar.alt = name;\r\n    this._userId = _id;\r\n  }\r\n\r\n\r\n  setUserAvatar(avatarLink) {\r\n    this._avatar.src = avatarLink;\r\n    this._avatar.alt = this._name;\r\n  }\r\n\r\n}","export default class Popup {\r\n  constructor(popupSelector) {\r\n    this._popup = popupSelector;\r\n    this._closeButton = this._popup.querySelector('.popup__close');\r\n    this._handleEscClose = this._popupEscClose.bind(this);\r\n    this._handleClickClose = this._popupClickClose.bind(this);\r\n    this._handleclosePopup = this.closePopup.bind(this);\r\n  }\r\n\r\n\r\n  _popupClickClose(event) {\r\n    if (event.target.classList.contains('popup') || event.target.classList.contains('popup__close')) {\r\n      this.closePopup();\r\n    }\r\n  }\r\n\r\n  _popupEscClose(event) {\r\n    if (event.key === \"Escape\") {\r\n      this.closePopup();\r\n    }\r\n  };\r\n\r\n\r\n  _addHandleEscClose() {\r\n    document.addEventListener('keydown', this._handleEscClose);\r\n  }\r\n\r\n  _removeHandleEscClose() {\r\n    document.removeEventListener('keydown', this._handleEscClose);\r\n  }\r\n\r\n\r\n  openPopup() {\r\n    this._popup.classList.add('popup_opened');\r\n    this._addHandleEscClose();\r\n  }\r\n\r\n  closePopup() {\r\n    this._popup.classList.remove('popup_opened');\r\n    this._removeHandleEscClose()\r\n  }\r\n\r\n  setEventListeners() {\r\n    document.addEventListener('click', this._handleClickClose);\r\n  }\r\n}","import Popup from './Popup.js'\r\n\r\n\r\nexport default class PopupWithImage extends Popup {\r\n  constructor(popupSelector) {\r\n    super(popupSelector);\r\n    this._image = this._popup.querySelector('.popup__image');\r\n    this._imageCaption = this._popup.querySelector('.popup__image-caption');\r\n  }\r\n\r\n  openPopup(name, link) {\r\n\r\n    this._image.src = link;\r\n    this._image.alt = name;\r\n    this._imageCaption.textContent = name;\r\n\r\n    super.openPopup();\r\n  }\r\n}","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithForm extends Popup {\r\n  constructor(popupSelector, submitForm, opener) {\r\n    super(popupSelector);\r\n    this._submitForm = submitForm;\r\n    this._opener = opener;\r\n    this._inputList = this._popup.querySelectorAll('.popup__input');\r\n    this._popupForm = this._popup.querySelector('.popup__form');\r\n  }\r\n\r\n\r\n  _getInputValues() {\r\n    this._inputsValues = {};\r\n    this._inputList.forEach(input => this._inputsValues[input.name] = input.value);\r\n    return this._inputsValues;\r\n  }\r\n\r\n\r\n  openPopup() {\r\n    super.openPopup();\r\n    this._opener();\r\n  }\r\n\r\n\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._popupForm.addEventListener('submit', () => { this._submitForm(this._getInputValues()); })\r\n  }\r\n\r\n  closePopup() {\r\n    super.closePopup();\r\n    this._popupForm.reset();\r\n  }\r\n}","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithConfirm extends Popup {\r\n  constructor(popupSelector, submitForm) {\r\n    super(popupSelector);\r\n    this._submitForm = submitForm;\r\n    this._popupForm = this._popup.querySelector('.popup__form');\r\n  }\r\n\r\n\r\n  openPopup(cardId, deleteCard) {\r\n    super.openPopup();\r\n    this._id = cardId;\r\n    this._funcToDeleteCard = deleteCard;\r\n  }\r\n\r\n\r\n\r\n  _formSubmit(evt) {\r\n    evt.preventDefault();\r\n    this._submitForm(this._id, this._funcToDeleteCard);\r\n  }\r\n\r\n\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._popupForm.addEventListener('submit', (evt) => { this._formSubmit(evt) });\r\n  }\r\n\r\n}","//УСТАНАВЛИВАЕМ КОНФИГ ДЛЯ ВАЛИДАЦИИ ПОПАПОВ:---------------------------------------------------\r\n\r\nexport const validationPopupsConfig = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  fieldsetSelector: '.popup__form-set',\r\n  submitButtonSelector: '.popup__submit',\r\n  inactiveButtonClass: 'popup__submit_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__input-error_visible'\r\n};\r\n\r\n//----------------------------\r\n\r\n//КОНСТАНТЫ: --------------------------\r\n\r\nexport const elementsContainer = document.querySelector('.elements__list');\r\n\r\n\r\nexport const popupEdit = document.querySelector('.popup_type_edit');\r\nexport const formEdit = popupEdit.querySelector('.popup__form');\r\n\r\n\r\nexport const popupAdd = document.querySelector('.popup_type_add');\r\nexport const formAdd = popupAdd.querySelector('.popup__form');\r\n\r\n\r\nexport const popupAvatar = document.querySelector('.popup_type_avatar');\r\nexport const formAvatar = popupAvatar.querySelector('.popup__form');\r\n\r\nexport const popupImage = document.querySelector('.popup_type_image');\r\nexport const popupConfirm = document.querySelector('.popup_type_confirm');\r\n\r\n\r\nexport const name = document.querySelector('.profile__title');\r\nexport const job = document.querySelector('.profile__subtitle');\r\nexport const avatar = document.querySelector('.profile__avatar-container');\r\nexport const avatarImage = document.querySelector('.profile__avatar');\r\n\r\n\r\nexport const nameInput = popupEdit.querySelector('.popup__input_type_name');\r\nexport const jobInput = popupEdit.querySelector('.popup__input_type_job');\r\n\r\nexport const placeInput = popupAdd.querySelector('.popup__input_type_place');\r\nexport const linkInput = popupAdd.querySelector('.popup__input_type_link');\r\n\r\nexport const avatarLinkInput = popupAvatar.querySelector('.popup__input_type_avatar-link');\r\n\r\n\r\nexport const editButton = document.querySelector('.profile__edit-button');\r\nexport const addButton = document.querySelector('.profile__add-button');\r\n\r\nexport const standartCard = document.querySelector('#element-template').content.querySelector('.elements__list-item');\r\n\r\n\r\n// ----------------------------","import './index.css'\r\nimport { Card } from '../components/Card.js';\r\nimport { FormValidator } from '../components/FormValidator.js';\r\nimport Api from '../components/Api.js';\r\nimport Section from '../components/Section.js';\r\nimport UserInfo from '../components/UserInfo.js';\r\n\r\nimport PopupWithImage from '../components/PopupWithImage.js';\r\nimport PopupWithForm from '../components/PopupWithForm.js';\r\nimport PopupWithConfirm from '../components/PopupWithConfirm.js';\r\nimport {\r\n  validationPopupsConfig,\r\n  elementsContainer,\r\n  popupEdit,\r\n  popupAdd,\r\n  popupImage,\r\n  popupAvatar,\r\n  popupConfirm,\r\n  name,\r\n  job,\r\n  avatar,\r\n  avatarImage,\r\n  avatarLinkInput,\r\n  nameInput,\r\n  jobInput,\r\n  placeInput,\r\n  linkInput,\r\n  editButton,\r\n  addButton,\r\n  standartCard\r\n} from '../utils/constants.js';\r\n\r\n\r\n//СОЗДАЕМ ВАЛИДАЦИЮ ДЛЯ ФОРМ:---------\r\n\r\nconst formEditValidator = new FormValidator(validationPopupsConfig, popupEdit);\r\nconst formAddValidator = new FormValidator(validationPopupsConfig, popupAdd);\r\nconst formAvatarValidator = new FormValidator(validationPopupsConfig, popupAvatar);\r\n\r\n//----------------\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-19',\r\n  headers: {\r\n    authorization: 'd4ad1f5c-6d3d-4923-9666-f0281ec3ce2e',\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\n\r\n//СОЗДАЕМ ПУСТОГО ЮЗЕРА: --------\r\n\r\nconst user = new UserInfo(name, job, avatarImage)\r\n\r\n//ЗАГРУЖАЕМ ЮЗЕРА И КАРТОЧКИ С СЕРВЕРА: -----------------------\r\n\r\nPromise.all([api.getUser(), api.getInitialCards()])\r\n  .then((results) => {\r\n\r\n    user.setUserInfo(results[0]);\r\n\r\n    const isAppend = true;\r\n    cardList.renderItems(results[1], isAppend);\r\n  })\r\n  .catch((err) => {\r\n    console.error(err);\r\n  });\r\n\r\n\r\n\r\n\r\n//СОЗДАЕМ КАРТОЧКИ: -------------------------------------------------------------------\r\n\r\nfunction createCard({ data, handleCardClick, handleDeleteClick, handleLikeClick }, cardSelector, userId) {\r\n  const card = new Card({ data, handleCardClick, handleDeleteClick, handleLikeClick }, cardSelector, userId);\r\n  return card;\r\n}\r\n\r\n\r\nconst cardList = new Section({\r\n  renderer: (item, insert) => {\r\n\r\n    const card = createCard({\r\n      data: item,\r\n\r\n      handleCardClick: (name, link) => {\r\n        imagePopup.openPopup(name, link);\r\n      },\r\n      handleDeleteClick: (cardId, deleteCard) => {\r\n        confirmPopup.openPopup(cardId, deleteCard)\r\n\r\n      },\r\n      handleLikeClick: (cardId, isLiked, setNewLikeStatus) => {\r\n        if (isLiked === false) {\r\n          api.setLikeCard(cardId)\r\n            .then(res => {\r\n              setNewLikeStatus(res);\r\n\r\n            })\r\n            .catch((err) => {\r\n              console.error(err);\r\n            });\r\n        } else {\r\n          api.deleteLikeCard(cardId)\r\n            .then(res => {\r\n              setNewLikeStatus(res);\r\n            })\r\n            .catch((err) => {\r\n              console.error(err);\r\n            });\r\n        }\r\n      },\r\n\r\n    }, standartCard, user.getUserInfo().id);\r\n\r\n    cardList.addItem(card.generateCard(), insert);\r\n  }\r\n\r\n}, elementsContainer);\r\n\r\n//----------------------------------------------------------------------------------------\r\n\r\n\r\n\r\n\r\n//КОЛБЕКИ ДЛЯ ПОПАПОВ------------------------------\r\n\r\nfunction openAddPopup() {\r\n  placeInput.value = '';\r\n  linkInput.value = '';\r\n\r\n  formAddValidator.resetAll();\r\n}\r\n\r\nfunction openEditPopup() {\r\n  nameInput.value = user.getUserInfo().name;\r\n  jobInput.value = user.getUserInfo().job;\r\n\r\n  formEditValidator.resetAll();\r\n}\r\n\r\nfunction openAvatarPopup() {\r\n  formAvatarValidator.resetAll();\r\n}\r\n\r\n//--------------------------------------------------\r\n\r\n\r\n\r\n\r\n//SUBMITы ФОРМ: -------------------------------------------------------------------------------------------------------------\r\n\r\nfunction inLoading(isLoading, popupSelector) {\r\n  const submitButton = popupSelector.querySelector('.popup__submit');\r\n\r\n  if (isLoading) {\r\n    submitButton.textContent = 'Сохранение...'\r\n  } else {\r\n    submitButton.textContent = 'Сохранить'\r\n  }\r\n}\r\n\r\n\r\nfunction submitEditForm(inputsValues) {\r\n  inLoading(true, popupEdit);\r\n  api.setUser(inputsValues)\r\n    .then(res => {\r\n      user.setUserInfo(res);\r\n    })\r\n    .catch((err) => {\r\n      renderError(`Ошибка: ${err}`);\r\n    })\r\n    .finally(() => {\r\n      inLoading(false, popupEdit);\r\n      formEditValidator.setDefaultButton();\r\n      editPopup.closePopup();\r\n    })\r\n}\r\n\r\nfunction submitAddForm(inputsValues) {\r\n  api.setNewCard(inputsValues)\r\n    .then((response) => {\r\n      const isAppend = false;\r\n      cardList.renderItems(response, isAppend);\r\n\r\n    })\r\n    .catch((err) => {\r\n      console.error(err);\r\n    })\r\n    .finally(() => {\r\n      formAddValidator.setDefaultButton();\r\n      addPopup.closePopup();\r\n    })\r\n}\r\n\r\nfunction submitAvatarForm() {\r\n  inLoading(true, popupAvatar);\r\n  api.setUserAvatar(avatarLinkInput.value)\r\n    .then((res) => {\r\n      user.setUserAvatar(res.avatar)\r\n    })\r\n    .catch((err) => {\r\n      renderError(`Ошибка: ${err}`);\r\n    })\r\n    .finally(() => {\r\n      inLoading(false, popupAvatar);\r\n      formAvatarValidator.setDefaultButton();\r\n      avatarPopup.closePopup();\r\n    })\r\n}\r\n\r\nfunction submitConfirmForm(cardId, deleteCard) {\r\n  api.deleteCard(cardId)\r\n    .then(() => {\r\n      confirmPopup.closePopup();\r\n      deleteCard();\r\n    })\r\n    .catch((err) => {\r\n      console.error(err);\r\n    });\r\n}\r\n\r\n//---------------------------------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n//СОЗДАЕМ ЭКЗЕМПЛЯРЫ ПОПАПОВ, ПРИМЕНЯЯ КОЛБЕКИ:\r\n\r\nconst imagePopup = new PopupWithImage(popupImage);\r\nconst addPopup = new PopupWithForm(popupAdd, submitAddForm, openAddPopup);\r\nconst editPopup = new PopupWithForm(popupEdit, submitEditForm, openEditPopup);\r\nconst avatarPopup = new PopupWithForm(popupAvatar, submitAvatarForm, openAvatarPopup);\r\nconst confirmPopup = new PopupWithConfirm(popupConfirm, submitConfirmForm);\r\n\r\n\r\n//СЛУШАТЕЛИ: ---------\r\naddButton.addEventListener('click', () => { addPopup.openPopup(); });\r\neditButton.addEventListener('click', () => { editPopup.openPopup(); });\r\navatar.addEventListener('click', () => { avatarPopup.openPopup(); });\r\n\r\n\r\n//ВЫПОЛНЯЕТСЯ:\r\n\r\nimagePopup.setEventListeners();\r\naddPopup.setEventListeners();\r\neditPopup.setEventListeners();\r\navatarPopup.setEventListeners();\r\nconfirmPopup.setEventListeners();\r\n\r\nformEditValidator.enableValidation();\r\nformAddValidator.enableValidation();\r\nformAvatarValidator.enableValidation();"],"sourceRoot":""}